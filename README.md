# SQL Query Generator

## Описание

Класс `SQLQueryGenerator` предназначен для автоматической генерации SQL-запросов на основе файла маппинга между таблицами 1С и SQL-таблицами. Решение поддерживает:

- Автоматическое построение SELECT запросов
- Обработку ссылочных типов данных (справочники, документы)
- Генерацию JOIN условий для связанных таблиц
- Создание CTE (Common Table Expressions)
- Гибкое управление алиасами полей

## Установка

1. Установите зависимости:
```bash
pip install pandas openpyxl
```

2. Добавьте файл `sql_query_generator.py` в ваш проект

## Использование

### Базовый пример
```python
from sql_query_generator import SQLQueryGenerator

# Инициализация генератора
generator = SQLQueryGenerator("path_to_mapping.xlsx")

# Генерация запроса
query = generator.generate_query("Справочник.Номенклатура")
print(query)
```

### Генерация CTE
```python
metadata = {
    "Документ.Поступление": ["Номер", "Дата", "Контрагент"],
    "Справочник.Контрагенты": ["Наименование", "ИНН"]
}

cte_query = generator.generate_cte(metadata)
```

### Получение информации
```python
# Список доступных таблиц
tables = generator.get_available_tables()

# Алиасы полей
aliases = generator.get_query_aliases("Документ.Поступление")
```

## Формат файла маппинга

Файл должен содержать следющие обязательные столбцы:

| Столбец                | Описание                          |
|------------------------|-----------------------------------|
| Имя таблицы 1С         | Название таблицы в 1С             |
| Имя поля 1С            | Название поля в 1С                |
| ТипПоля1С              | Тип поля (Справочник, Документ и т.д.) |
| SQL таблица            | Соответствующая SQL таблица       |
| SQL Имя поля           | Поле в SQL таблице                |
| SQLВнешняяТаблица      | Внешняя таблица для ссылок        |
| Связи                  | Условия JOIN между таблицами      |

## Лицензия

MIT License
